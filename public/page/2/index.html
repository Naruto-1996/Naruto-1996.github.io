<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>第 2 页 | Weaver Li</title>
  <meta name="author" content="Weaver Li">
  
  <meta name="description" content="Time is money!">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Weaver Li"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Weaver Li" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>






<meta name="generator" content="Hexo 5.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Weaver Li</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header logo">
  <h1>Show Me The Code!<span class="blink-fast">|</span></h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">


		<i class="fa fa-heart blink-slow"></i>

		wubba lubba dub dub.

</div>    

		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2021/02/02/zai-linux-fu-wu-qi-shang-an-zhuang-ruby-on-rails/" >在linux服务器上安装Ruby_On_Rails</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2021-02-02  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="在linux服务器上安装Ruby-On-Rails"><a href="#在linux服务器上安装Ruby-On-Rails" class="headerlink" title="在linux服务器上安装Ruby On Rails"></a>在linux服务器上安装Ruby On Rails</h4><h5 id="1、安装rbenv"><a href="#1、安装rbenv" class="headerlink" title="1、安装rbenv"></a>1、安装rbenv</h5><p>先安装git</p>
<pre><code># mac
brew install git
# centos
yum install git
# ubuntu
apt-get install git</code></pre>
<p>然后安装rbenv</p>
<pre><code># 安装rbenv到~/.rbenv目录
git clone git://github.com/sstephenson/rbenv.git ~/.rbenv</code></pre>
<p>下面安装一下rbenv的插件</p>
<pre><code># 用来编译安装 ruby
git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build

# 用来管理 gemset, 可选, 因为有 bundler 也没什么必要
git clone git://github.com/jamis/rbenv-gemset.git  ~/.rbenv/plugins/rbenv-gemset

# 通过 gem 命令安装完 gem 后无需手动输入 rbenv rehash 命令, 推荐
git clone git://github.com/sstephenson/rbenv-gem-rehash.git ~/.rbenv/plugins/rbenv-gem-rehash

# 通过 rbenv update 命令来更新 rbenv 以及所有插件, 推荐
git clone git://github.com/rkh/rbenv-update.git ~/.rbenv/plugins/rbenv-update

# 使用 Ruby China 的镜像安装 Ruby, 国内用户推荐
git clone git://github.com/AndorChen/rbenv-china-mirror.git ~/.rbenv/plugins/rbenv-china-mirror</code></pre>
<p>然后需要将下面两句代码放在bash的配置文件中：</p>
<pre><code>export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"</code></pre>
<p>linux是一般是放在<del>/.bashrc中，mac是放在</del>/.bash_profile中</p>
<p>修改完成后，执行下面的命令使其生效</p>
<pre><code># linux
source ~/.bashrc
# mac
source ~/.bash_profile</code></pre>
<h4 id="2、安装ruby"><a href="#2、安装ruby" class="headerlink" title="2、安装ruby"></a>2、安装ruby</h4><p>rbenv install –list  # 列出所有 ruby 版本</p>
<p>例如安装2.7.2</p>
<pre><code>rbenv install 2.7.2</code></pre>
<p>设置使用的ruby版本, 有以下三种设置方式</p>
<pre><code>rbenv global 2.3.3      # 默认使用2.3.3
rbenv shell 2.3.3       # 当前的 shell 使用2.3.3, 会设置一个 `RBENV_VERSION` 环境变量
rbenv local 2.3.3      # 当前目录使用2.3.3, 会生成一个 `.rbenv-version` 文件</code></pre>
<h4 id="3-安装rails"><a href="#3-安装rails" class="headerlink" title="3. 安装rails"></a>3. 安装rails</h4><p>设置ruby版本后，安装rails：</p>
<pre><code># 在当前的ruby版本中安装rails
gem install rails</code></pre>
<p>好了，这样就完成了rails的安装，rails已经可以使用了，但是为了更好的使用，请继续看后面的教程。</p>
<h3 id="配置RubyGems镜像"><a href="#配置RubyGems镜像" class="headerlink" title="配置RubyGems镜像"></a>配置RubyGems镜像</h3><p>gem是ruby管理依赖包的工具，而RubyGems的默认地址因为万恶的墙的关系很难访问到，因此需要配置RubyGems 镜像。这里使用的是<a target="_blank" rel="noopener" href="https://gems.ruby-china.com/">Ruby China</a>的镜像地址</p>
<p>命令行输入</p>
<pre><code>gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/</code></pre>
<p>可以通过下面这个命令查看设置的结果是不是<a href="https://gems.ruby-china.com：">https://gems.ruby-china.com：</a></p>
<pre><code>gem sources -l</code></pre>
<h3 id="修改bundle的源地址"><a href="#修改bundle的源地址" class="headerlink" title="修改bundle的源地址"></a>修改bundle的源地址</h3><p>bundler是rails管理gem依赖的工具，同样的，也需要修改其地址为ruby china的镜像</p>
<p>命令行输入</p>
<pre><code>bundle config mirror.https://rubygems.org https://gems.ruby-china.com</code></pre>

	
	</div>
  <a type="button" href="/2021/02/02/zai-linux-fu-wu-qi-shang-an-zhuang-ruby-on-rails/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2021/02/02/ubuntu-xia-an-zhuang-redis/" >ubuntu下安装redis</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2021-02-02  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="ubuntu下安装redis"><a href="#ubuntu下安装redis" class="headerlink" title="ubuntu下安装redis"></a>ubuntu下安装redis</h4><h5 id="1、使用apt安装"><a href="#1、使用apt安装" class="headerlink" title="1、使用apt安装"></a>1、使用apt安装</h5><p>在 Ubuntu 系统安装 Redi 可以使用以下命令:</p>
<pre><code>$sudo apt-get update
$sudo apt-get install redis-server</code></pre>
<h5 id="2、启动redis"><a href="#2、启动redis" class="headerlink" title="2、启动redis"></a>2、启动redis</h5><pre><code>$ redis-server</code></pre>
<h5 id="3、查看-redis-是否启动？"><a href="#3、查看-redis-是否启动？" class="headerlink" title="3、查看 redis 是否启动？"></a>3、查看 redis 是否启动？</h5><pre><code>$ redis-cli</code></pre>
<p>以上命令将打开以下终端：</p>
<pre><code>redis 127.0.0.1:6379&gt;</code></pre>
<p>127.0.0.1 是本机 IP ，6379 是 redis 服务端口。现在我们输入 PING 命令。</p>
<pre><code>redis 127.0.0.1:6379&gt; ping PONG</code></pre>

	
	</div>
  <a type="button" href="/2021/02/02/ubuntu-xia-an-zhuang-redis/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2021/02/02/ubuntu-xia-an-zhuang-mysql/" >ubuntu下安装mysql</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2021-02-02  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="ubuntu下安装mysql"><a href="#ubuntu下安装mysql" class="headerlink" title="ubuntu下安装mysql"></a>ubuntu下安装mysql</h4><blockquote>
<p>MySQL 的安装比较简单，只需要简单的几步就可以搞定，但它的一些配置却比较繁琐。下面以 Ubuntu 18.04（其他版本类似）为例，详细介绍 MySQL 数据库的安装和配置。</p>
</blockquote>
<h5 id="1、安装mysql"><a href="#1、安装mysql" class="headerlink" title="1、安装mysql"></a>1、安装mysql</h5><p>在 Ubuntu 中，默认只有最新版本的 MySQL 包含在 APT 软件包存储库中。</p>
<p>要安装它，需要使用 apt 更新服务器上的软件包索引：</p>
<pre class="line-numbers language-linux"><code class="language-linux">$ sudo apt update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后安装默认的 MySQL 软件包：</p>
<pre><code>$ sudo apt install mysql-server</code></pre>
<p>这一步不会进行一些配置相关的提示（例如：设置密码），因为会使 MySQL 的安装不安全，我们将在下一步解决该问题。</p>
<h5 id="2、配置mysql"><a href="#2、配置mysql" class="headerlink" title="2、配置mysql"></a>2、配置mysql</h5><p>在安装完 MySQL 之后，应该运行一下包含的安全脚本：</p>
<pre><code>sudo mysql_secure_installation</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202115006.png"></p>
<p>重点说一下第一个提示，这会询问我们是否愿意设置验证密码插件，该插件可用于测试 MySQL 密码的强度。</p>
<h5 id="3、更改用户验证方式"><a href="#3、更改用户验证方式" class="headerlink" title="3、更改用户验证方式"></a>3、更改用户验证方式</h5><p>虽然上面设置了 root 用户的密码，但当通过 MySQL 终端登录时，并不能通过密码进行认证：</p>
<pre><code>$ mysql -u root -p
Enter password:
ERROR 1698 (28000): Access denied for user 'root'@'localhost'</code></pre>
<p>这是因为在 MySQL 5.7 及之后的版本中，root 用户被默认设置为通过 auth_socket 插件（而非密码）认证，其主要原因是出于对数据库的安全性考虑。</p>
<p>话虽如此，但偶尔也需要外部程序来访问，这时就会很麻烦了。为了使 root 用户能通过密码方式连接 MySQL，先通过终端打开 MySQL 的提示符：</p>
<pre><code>sudo mysql</code></pre>
<p>然后通过如下命令，检查 MySQL 中每个用户的认证方式：</p>
<pre><code>mysql&gt; SELECT user, authentication_string, plugin, host FROM mysql.user;
+------------------+-------------------------------------------+-----------------------+-----------+
| user             | authentication_string                     | plugin                | host      |
+------------------+-------------------------------------------+-----------------------+-----------+
| root             |                                           | auth_socket           | localhost |
| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |
| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |
| debian-sys-maint | *ABA968D18E3A0B6DEB02F9D5FBDA21415A86977B | mysql_native_password | localhost |
+------------------+-------------------------------------------+-----------------------+-----------+
4 rows in set (0.00 sec)</code></pre>
<p>显而易见，root 用户的认证方式是 auth_socket。现在运行如下命令，将认证方式更改为密码认证（即：mysql_native_password）：</p>
<pre><code>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';</code></pre>
<p>可以看到，已经修改成功了，现在退出数据库：</p>
<pre><code>mysql&gt; exit</code></pre>
<p>再来尝试一下，让 root 用户以密码形式登录：</p>
<pre><code>$ mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7
Server version: 5.7.29-0ubuntu0.18.04.1 (Ubuntu)

Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt;</code></pre>
<h5 id="4、配置远程访问"><a href="#4、配置远程访问" class="headerlink" title="4、配置远程访问"></a>4、配置远程访问</h5><p>默认情况下，MySQL 只监听本地主机（localhost）的连接。若要启用远程连接，需要进行以下配置。</p>
<ol>
<li>编辑 MySQL 的 mysqld.cnf 配置文件：</li>
</ol>
<pre><code>sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</code></pre>
<p>注释掉下面这行配置并保存退出：</p>
<pre><code>bind-address          = 127.0.0.1</code></pre>
<ol start="2">
<li>更改 user 表中的 host 项，将“localhost”改称“%”（表示所有用户都可以访问），并给 root 用户授权：</li>
</ol>
<pre><code>
$ mysql -u root -p

mysql&gt; use mysql;
mysql&gt;
mysql&gt; update user set host = '%' where user = 'root';
mysql&gt;
mysql&gt; grant all on *.* to root@'%' identified by '123456' with grant option;
mysql&gt;
mysql&gt; flush privileges;  # 刷新权限
mysql&gt;
mysql&gt; exit
</code></pre>
<ol start="3">
<li>执行如下命令，重启 mysql 服务：</li>
</ol>
<pre><code>$ sudo systemctl restart mysql</code></pre>
<p>现在，就可以远程连接（下图为 Navicat 截图） MySQl 数据库了：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202120829.png"></p>

	
	</div>
  <a type="button" href="/2021/02/02/ubuntu-xia-an-zhuang-mysql/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2021/02/02/ubuntu-xia-che-di-xie-zai-mysql/" >ubuntu下彻底卸载mysql</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2021-02-02  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="Ubuntu下彻底卸载mysql"><a href="#Ubuntu下彻底卸载mysql" class="headerlink" title="Ubuntu下彻底卸载mysql"></a>Ubuntu下彻底卸载mysql</h4><blockquote>
<p>采用sudo apt install mysql-server命令的方式默认安装的是MySQL5.7，MySQL5.7版本最高只适配到Ubuntu17.04，<br>不支持Ubuntu18.04，MySQL8.0可适配到Ubuntu18.04故如果系统使用的Ubuntu18.04，<br>只能安装MySQL8.0，而且加密方式需要选择5.x的加密，因为有兼容性问题，如果你已经执行了上边的命令，安装了MySQL5.7，需要先卸载。</p>
</blockquote>
<h5 id="1、首先在系统终端中查看MySQL的依赖项，运行命令：dpkg-list-grep-mysql"><a href="#1、首先在系统终端中查看MySQL的依赖项，运行命令：dpkg-list-grep-mysql" class="headerlink" title="1、首先在系统终端中查看MySQL的依赖项，运行命令：dpkg --list|grep mysql"></a>1、首先在系统终端中查看MySQL的依赖项，运行命令：<code>dpkg --list|grep mysql</code></h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093257.png"></p>
<h5 id="2、卸载-sudo-apt-get-remove-mysql-common"><a href="#2、卸载-sudo-apt-get-remove-mysql-common" class="headerlink" title="2、卸载 sudo apt-get remove mysql-common"></a>2、卸载 <code>sudo apt-get remove mysql-common</code></h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093512.png"></p>
<p>卸载 <code>sudo apt-get autoremove --purge mysql-server-5.7</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093713.png"></p>
<h4 id="3、清除残留数据，运行命令：dpkg-l-grep-rc-awk-39-print-2-39-sudo-xargs-dpkg-P"><a href="#3、清除残留数据，运行命令：dpkg-l-grep-rc-awk-39-print-2-39-sudo-xargs-dpkg-P" class="headerlink" title="3、清除残留数据，运行命令：dpkg -l|grep ^rc|awk '{print$2}'|sudo xargs dpkg -P"></a>3、清除残留数据，运行命令：<code>dpkg -l|grep ^rc|awk '{print$2}'|sudo xargs dpkg -P</code></h4><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093832.png"></p>
<h4 id="4、再次查看MySQL的剩余依赖项，运行命令：dpkg-list-grep-mysql"><a href="#4、再次查看MySQL的剩余依赖项，运行命令：dpkg-list-grep-mysql" class="headerlink" title="4、再次查看MySQL的剩余依赖项，运行命令：dpkg --list|grep mysql"></a>4、再次查看MySQL的剩余依赖项，运行命令：<code>dpkg --list|grep mysql</code></h4><blockquote>
<p> 如果还有依赖项 就继续删除剩余依赖项，比如：sudo apt-get autoremove –purge mysql-apt-config<br> 如果没有那就表示删除干净了</p>
</blockquote>

	
	</div>
  <a type="button" href="/2021/02/02/ubuntu-xia-che-di-xie-zai-mysql/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/30/da-jian-fu-wu-qi-ubuntu-xi-tong/" >搭建服务器ubuntu系统</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-30  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="购买完服务器后应该做哪些配置"><a href="#购买完服务器后应该做哪些配置" class="headerlink" title="购买完服务器后应该做哪些配置"></a>购买完服务器后应该做哪些配置</h4><h5 id="一-、安装apache"><a href="#一-、安装apache" class="headerlink" title="一 、安装apache"></a>一 、安装apache</h5><pre><code>sudo apt-get install apche2 apche2-doc</code></pre>
<p>如果你已经安装完了nginx，你需要安装一个这个东西，当你在浏览器地址栏输入服务器公网ip的时候就会出现一个nginx的默认页面 就像这样的</p>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201230160621.png"></p>
<h5 id="二、安装mysql"><a href="#二、安装mysql" class="headerlink" title="二、安装mysql"></a>二、安装mysql</h5><pre><code>sudo apt-get install mysql-server mysql-client</code></pre>
<p>在安装mysql的时候可能会提醒设置root账户密码</p>
<h5 id="三、更改默认python版本："><a href="#三、更改默认python版本：" class="headerlink" title="三、更改默认python版本："></a>三、更改默认python版本：</h5><p>修改软连接</p>
<p>1、进入到usr/bin目录下</p>
<pre><code>cd /usr/bin</code></pre>
<p>2、查看该目录下与python有关的项</p>
<pre><code>ls -altrh | grep python</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201230174310.png"></p>
<p>3、删除软连接并指向新的版本</p>
<pre><code>sudo rm python
sudo ln -s python3.6 python</code></pre>
<p>4、最后结果</p>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201230174848.png"></p>

	
	</div>
  <a type="button" href="/2020/12/30/da-jian-fu-wu-qi-ubuntu-xi-tong/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/18/android-yi-xie-chang-yong-de-bei-jing-tu/" >Android一些常用的背景图</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-18  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="Android中一些常用的xml背景图"><a href="#Android中一些常用的xml背景图" class="headerlink" title="Android中一些常用的xml背景图"></a>Android中一些常用的xml背景图</h4><h5 id="1、绿色背景-圆角为4dp的xml背景-颜色可自行修改"><a href="#1、绿色背景-圆角为4dp的xml背景-颜色可自行修改" class="headerlink" title="1、绿色背景 圆角为4dp的xml背景(颜色可自行修改)"></a>1、绿色背景 圆角为4dp的xml背景(颜色可自行修改)</h5><p>res/drawable 目录下 common_bg_4_radius_green.xml</p>
<pre class="line-numbers language-xml"><code class="language-xml">
<span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rectangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/绿色<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201218170312.png"></p>
<h5 id="2、绿色border边框背景"><a href="#2、绿色border边框背景" class="headerlink" title="2、绿色border边框背景"></a>2、绿色border边框背景</h5><pre class="line-numbers language-xml"><code class="language-xml">
<span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
<span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rectangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stroke</span>
  <span class="token attr-name"><span class="token namespace">android:</span>width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.6dp<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/绿色<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201218170216.png"></p>
<h5 id="3、背景为圆形"><a href="#3、背景为圆形" class="headerlink" title="3、背景为圆形"></a>3、背景为圆形</h5><pre class="line-numbers language-xml"><code class="language-xml">
<span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>oval<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/绿色<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8.3dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>size</span>
    <span class="token attr-name"><span class="token namespace">android:</span>width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>17dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>17dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201218170648.png"></p>

	
	</div>
  <a type="button" href="/2020/12/18/android-yi-xie-chang-yong-de-bei-jing-tu/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/18/android-zi-ding-yi-edittext-yi-jian-qing-chu-he-mi-wen-cha-kan/" >Android自定义EditText一键清除和密文查看</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-18  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="Android自定义EditText一键清除和密文查看"><a href="#Android自定义EditText一键清除和密文查看" class="headerlink" title="Android自定义EditText一键清除和密文查看"></a>Android自定义EditText一键清除和密文查看</h4><ul>
<li>先上截屏看一下效果<br><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/S01218-16245606.jpg"></li>
</ul>
<h5 id="自定义步骤"><a href="#自定义步骤" class="headerlink" title="自定义步骤"></a>自定义步骤</h5><h5 id="1、首先新建一个类PowerfulEditText-java-我放在了widgets目录中这个目录平时就用来存放一些自定义的类"><a href="#1、首先新建一个类PowerfulEditText-java-我放在了widgets目录中这个目录平时就用来存放一些自定义的类" class="headerlink" title="1、首先新建一个类PowerfulEditText.java 我放在了widgets目录中这个目录平时就用来存放一些自定义的类"></a>1、首先新建一个类PowerfulEditText.java 我放在了widgets目录中这个目录平时就用来存放一些自定义的类</h5><pre class="line-numbers language-java"><code class="language-java">
<span class="token comment" spellcheck="true">//  这个自定义EditText 有两个按钮 一键清空按钮 和 小眼睛查看明文</span>
<span class="token comment" spellcheck="true">//  isPassword 字段会根据输入框是否是密码框来决定是否会绘制小眼睛 很好用</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PowerfulEditText</span> <span class="token keyword">extends</span> <span class="token class-name">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>AppCompatEditText</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String TAG <span class="token operator">=</span> <span class="token string">"PowerfulEditText.java"</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_CLEAR_RES <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>delete_edit<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_VISIBLE_RES <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black_open_eyes<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INVISIBLE_RES <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black_close_eyes<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_STYLE_COLOR <span class="token operator">=</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_BUTTON_PADDING <span class="token operator">=</span>
    <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>btn_edit_text_padding<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_BUTTON_WIDTH <span class="token operator">=</span>
    <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>btn_edit_text_width<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_RECT <span class="token operator">=</span> <span class="token string">"rectangle"</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_ROUND_RECT <span class="token operator">=</span> <span class="token string">"roundRect"</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_HALF_RECT <span class="token operator">=</span> <span class="token string">"halfRect"</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_ANIMATOR <span class="token operator">=</span> <span class="token string">"animator"</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_ROUND_RADIUS <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ANIMATOR_TIME <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_FOCUSED_STROKE_WIDTH <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_UNFOCUSED_STROKE_WIDTH <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">//按钮间隔</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mBtnPadding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//按钮宽度</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mBtnWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//右内边距</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mTextPaddingRight<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">int</span> mClearResId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mVisibleResId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mInvisibleResId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> Bitmap mBitmapClear<span class="token punctuation">;</span>
  <span class="token keyword">private</span> Bitmap mBitmapVisible<span class="token punctuation">;</span>
  <span class="token keyword">private</span> Bitmap mBitmapInvisible<span class="token punctuation">;</span>

  <span class="token keyword">private</span> String mBorderStyle <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mStyleColor <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">//出现和消失动画</span>
  <span class="token keyword">private</span> ValueAnimator mGoneAnimator<span class="token punctuation">;</span>
  <span class="token keyword">private</span> ValueAnimator mVisibleAnimator<span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//状态值</span>
  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isBtnVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// isPassword 字段会根据输入框是否是密码框来决定是否会绘制小眼睛</span>
  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isPassword <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isPasswordVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isAnimatorRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> mAnimatorProgress <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> ObjectAnimator mAnimator<span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">//自定义属性动画</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Property<span class="token operator">&lt;</span>PowerfulEditText<span class="token punctuation">,</span> Integer<span class="token operator">></span> BORDER_PROGRESS
    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Property</span><span class="token operator">&lt;</span>PowerfulEditText<span class="token punctuation">,</span> Integer<span class="token operator">></span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">"borderProgress"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Integer <span class="token function">get</span><span class="token punctuation">(</span>PowerfulEditText powerfulEditText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> powerfulEditText<span class="token punctuation">.</span><span class="token function">getBorderProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>PowerfulEditText powerfulEditText<span class="token punctuation">,</span> Integer value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      powerfulEditText<span class="token punctuation">.</span><span class="token function">setBorderProgress</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> Paint mPaint<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token function">PowerfulEditText</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">PowerfulEditText</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> AttributeSet attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">init</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">PowerfulEditText</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> AttributeSet attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">init</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> AttributeSet attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//抗锯齿和位图滤波</span>
    mPaint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Paint</span><span class="token punctuation">(</span>Paint<span class="token punctuation">.</span>ANTI_ALIAS_FLAG <span class="token operator">|</span> Paint<span class="token punctuation">.</span>FILTER_BITMAP_FLAG<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//读取xml文件中的配置</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>attrs <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      TypedArray array <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">obtainStyledAttributes</span><span class="token punctuation">(</span>attrs<span class="token punctuation">,</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span><span class="token function">getIndexCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> attr <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span>attr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_clearDrawable<span class="token operator">:</span>
            mClearResId <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_CLEAR_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_visibleDrawable<span class="token operator">:</span>
            mVisibleResId <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_VISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_invisibleDrawable<span class="token operator">:</span>
            mInvisibleResId <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_INVISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_BtnWidth<span class="token operator">:</span>
            mBtnWidth <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_BUTTON_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_BtnSpacing<span class="token operator">:</span>
            mBtnPadding <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_BUTTON_PADDING<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_borderStyle<span class="token operator">:</span>
            mBorderStyle <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_styleColor<span class="token operator">:</span>
            mStyleColor <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_STYLE_COLOR<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      array<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//初始化按钮显示的Bitmap</span>
    mBitmapClear <span class="token operator">=</span> <span class="token function">createBitmap</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mClearResId<span class="token punctuation">,</span> DEFAULT_CLEAR_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mBitmapVisible <span class="token operator">=</span> <span class="token function">createBitmap</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mVisibleResId<span class="token punctuation">,</span> DEFAULT_VISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mBitmapInvisible <span class="token operator">=</span> <span class="token function">createBitmap</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mInvisibleResId<span class="token punctuation">,</span> DEFAULT_INVISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//如果自定义，则使用自定义的值，否则使用默认值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mBtnPadding <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mBtnPadding <span class="token operator">=</span> DEFAULT_BUTTON_PADDING<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mBtnWidth <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mBtnWidth <span class="token operator">=</span> DEFAULT_BUTTON_WIDTH<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//给文字设置一个padding，避免文字和按钮重叠了</span>
    mTextPaddingRight <span class="token operator">=</span> mBtnPadding <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> mBtnWidth <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//按钮出现和消失的动画</span>
    mGoneAnimator <span class="token operator">=</span> ValueAnimator<span class="token punctuation">.</span><span class="token function">ofFloat</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>ANIMATOR_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mVisibleAnimator <span class="token operator">=</span> ValueAnimator<span class="token punctuation">.</span><span class="token function">ofFloat</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>ANIMATOR_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//是否是密码样式</span>
    isPassword <span class="token operator">=</span>
      <span class="token function">getInputType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>TYPE_TEXT_VARIATION_PASSWORD <span class="token operator">|</span> InputType<span class="token punctuation">.</span>TYPE_CLASS_TEXT<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onMeasure</span><span class="token punctuation">(</span><span class="token keyword">int</span> widthMeasureSpec<span class="token punctuation">,</span> <span class="token keyword">int</span> heightMeasureSpec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onMeasure</span><span class="token punctuation">(</span>widthMeasureSpec<span class="token punctuation">,</span> heightMeasureSpec<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//设置右内边距, 防止清除按钮和文字重叠</span>
    <span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token function">getPaddingLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getPaddingTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mTextPaddingRight<span class="token punctuation">,</span> <span class="token function">getPaddingBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDraw</span><span class="token punctuation">(</span>Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

    mPaint<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Paint<span class="token punctuation">.</span>Style<span class="token punctuation">.</span>STROKE<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//使用自定义颜色。如未定义，则使用默认颜色</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mStyleColor <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mPaint<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>mStyleColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      mPaint<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>DEFAULT_STYLE_COLOR<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//控件获取焦点时，加粗边框</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span>DEFAULT_FOCUSED_STROKE_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      mPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span>DEFAULT_UNFOCUSED_STROKE_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//绘制边框</span>
    <span class="token function">drawBorder</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//绘制清空和明文显示按钮</span>
    <span class="token function">drawButtons</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawBorder</span><span class="token punctuation">(</span>Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>mBorderStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//矩形样式</span>
      <span class="token keyword">case</span> STYLE_RECT<span class="token operator">:</span>
        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//圆角矩形样式</span>
      <span class="token keyword">case</span> STYLE_ROUND_RECT<span class="token operator">:</span>
        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> roundRectLineWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          roundRectLineWidth <span class="token operator">=</span> DEFAULT_FOCUSED_STROKE_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          roundRectLineWidth <span class="token operator">=</span> DEFAULT_UNFOCUSED_STROKE_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        mPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span>roundRectLineWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Build<span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">>=</span> <span class="token number">21</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          canvas<span class="token punctuation">.</span><span class="token function">drawRoundRect</span><span class="token punctuation">(</span>
            roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> width <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
            DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span> DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span>
            mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          canvas<span class="token punctuation">.</span><span class="token function">drawRoundRect</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">RectF</span><span class="token punctuation">(</span>roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> width <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span> DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span>
            mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//半矩形样式</span>
      <span class="token keyword">case</span> STYLE_HALF_RECT<span class="token operator">:</span>
        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//动画特效样式</span>
      <span class="token keyword">case</span> STYLE_ANIMATOR<span class="token operator">:</span>
        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isAnimatorRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> mAnimatorProgress<span class="token punctuation">,</span> height<span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> mAnimatorProgress<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>mAnimatorProgress <span class="token operator">==</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            isAnimatorRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawButtons</span><span class="token punctuation">(</span>Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//播放按钮出现的动画</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mVisibleAnimator<span class="token punctuation">.</span><span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> scale <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span> mVisibleAnimator<span class="token punctuation">.</span><span class="token function">getAnimatedValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">drawClearButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> isPasswordVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//绘制静态的按钮</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">drawClearButton</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> isPasswordVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//播放按钮消失的动画</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mGoneAnimator<span class="token punctuation">.</span><span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> scale <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span> mGoneAnimator<span class="token punctuation">.</span><span class="token function">getAnimatedValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">drawClearButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> isPasswordVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawClearButton</span><span class="token punctuation">(</span><span class="token keyword">float</span> scale<span class="token punctuation">,</span> Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> right <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span>scale <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottom <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>top <span class="token operator">+</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Rect rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>mBitmapClear<span class="token punctuation">,</span> null<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span><span class="token keyword">float</span> scale<span class="token punctuation">,</span> Canvas canvas<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> right <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span>scale <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottom <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>top <span class="token operator">+</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Rect rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>mBitmapVisible<span class="token punctuation">,</span> null<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>mBitmapInvisible<span class="token punctuation">,</span> null<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// 清除按钮出现时的动画效果</span>
  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startVisibleAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">endAllAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mVisibleAnimator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// 清除按钮消失时的动画效果</span>
  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startGoneAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">endAllAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mGoneAnimator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// 结束所有动画</span>
  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">endAllAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mGoneAnimator<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mVisibleAnimator<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onFocusChanged</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> focused<span class="token punctuation">,</span> <span class="token keyword">int</span> direction<span class="token punctuation">,</span> Rect previouslyFocusedRect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onFocusChanged</span><span class="token punctuation">(</span>focused<span class="token punctuation">,</span> direction<span class="token punctuation">,</span> previouslyFocusedRect<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//播放按钮出现和消失动画</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>focused <span class="token operator">&amp;&amp;</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isBtnVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">startVisibleAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isBtnVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">startGoneAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//实现动画特效样式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>focused <span class="token operator">&amp;&amp;</span> mBorderStyle<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>STYLE_ANIMATOR<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      isAnimatorRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      mAnimator <span class="token operator">=</span> ObjectAnimator<span class="token punctuation">.</span><span class="token function">ofInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> BORDER_PROGRESS<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      mAnimator<span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>ANIMATOR_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>
      mAnimator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setBorderProgress</span><span class="token punctuation">(</span><span class="token keyword">int</span> borderProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mAnimatorProgress <span class="token operator">=</span> borderProgress<span class="token punctuation">;</span>
    <span class="token function">postInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">getBorderProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mAnimatorProgress<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onTextChanged</span><span class="token punctuation">(</span>CharSequence text<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> lengthBefore<span class="token punctuation">,</span> <span class="token keyword">int</span> lengthAfter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onTextChanged</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> lengthBefore<span class="token punctuation">,</span> lengthAfter<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isBtnVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">startVisibleAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isBtnVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">startGoneAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_UP<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">boolean</span> clearTouched <span class="token operator">=</span>
        <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">-</span> mBtnWidth <span class="token operator">&lt;</span> event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding<span class="token punctuation">)</span>
          <span class="token operator">&amp;&amp;</span> <span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">boolean</span> visibleTouched <span class="token operator">=</span>
        <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">&lt;</span> event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth<span class="token punctuation">)</span>
          <span class="token operator">&amp;&amp;</span> isPassword <span class="token operator">&amp;&amp;</span> <span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>clearTouched<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setError</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>visibleTouched<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPasswordVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          isPasswordVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token function">setInputType</span><span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>TYPE_TEXT_VARIATION_PASSWORD <span class="token operator">|</span> InputType<span class="token punctuation">.</span>TYPE_CLASS_TEXT<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setSelection</span><span class="token punctuation">(</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          isPasswordVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token function">setInputType</span><span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>TYPE_TEXT_VARIATION_VISIBLE_PASSWORD<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setSelection</span><span class="token punctuation">(</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// 开始晃动的入口</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startShakeAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setAnimation</span><span class="token punctuation">(</span><span class="token function">shakeAnimation</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">startAnimation</span><span class="token punctuation">(</span><span class="token function">getAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">/**
   * 晃动动画
   *
   * @param counts 0.5秒钟晃动多少下
   * @return
   */</span>
  <span class="token keyword">private</span> Animation <span class="token function">shakeAnimation</span><span class="token punctuation">(</span><span class="token keyword">int</span> counts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Animation translateAnimation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TranslateAnimation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    translateAnimation<span class="token punctuation">.</span><span class="token function">setInterpolator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CycleInterpolator</span><span class="token punctuation">(</span>counts<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    translateAnimation<span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> translateAnimation<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> Bitmap <span class="token function">createBitmap</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token keyword">int</span> resId<span class="token punctuation">,</span> <span class="token keyword">int</span> defResId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resId <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> resId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> defResId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个类里面会用到values目录中的attrs.xml 和 dimens.xml 如果没有就自行创建</p>
<h5 id="2、往attrs-xml中写入自定义EditText的属性"><a href="#2、往attrs-xml中写入自定义EditText的属性" class="headerlink" title="2、往attrs.xml中写入自定义EditText的属性"></a>2、往attrs.xml中写入自定义EditText的属性</h5><pre class="line-numbers language-xml"><code class="language-xml">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>
 <span class="token comment" spellcheck="true">&lt;!--  自定义EditText的属性--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>declare-styleable</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PowerfulEditText<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!--图片资源--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearDrawable<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>visibleDrawable<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>invisibleDrawable<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token comment" spellcheck="true">&lt;!--按钮宽度大小--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>BtnWidth<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dimension<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token comment" spellcheck="true">&lt;!--按钮间距大小--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>BtnSpacing<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dimension<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token comment" spellcheck="true">&lt;!--边框颜色和样式--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>styleColor<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>color<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>borderStyle<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>declare-styleable</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="3、往dimens-xml中写入一些大小配置"><a href="#3、往dimens-xml中写入一些大小配置" class="headerlink" title="3、往dimens.xml中写入一些大小配置"></a>3、往dimens.xml中写入一些大小配置</h5><pre class="line-numbers language-xml"><code class="language-xml">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>
  <span class="token comment" spellcheck="true">&lt;!-- Default screen margins, per the Android Design guidelines. 自定义editText的属性设置 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>activity_horizontal_margin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>16dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>activity_vertical_margin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>16dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>
  <span class="token comment" spellcheck="true">&lt;!--按钮间距大小--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn_edit_text_padding<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>8dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>
  <span class="token comment" spellcheck="true">&lt;!--按钮宽度大小--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn_edit_text_width<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>16dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="4、在布局文件中使用"><a href="#4、在布局文件中使用" class="headerlink" title="4、在布局文件中使用"></a>4、在布局文件中使用</h5><pre class="line-numbers language-xml"><code class="language-xml">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.你的包名.widgets.PowerfulEditText</span>
          <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/password_edit<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>45dp<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@null<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>paddingStart</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>12dp<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>15sp<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>请输入密码<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">app:</span>BtnWidth</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@dimen/btn_edit_text_width<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">app:</span>BtnSpacing</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@dimen/btn_edit_text_padding<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textPassword<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">tools:</span>ignore</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>RtlSymmetry<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>一共是7个样式可以在xml中使用</p>
<pre><code>
app:clearDrawable="@drawable/clear_all"  
app:visibleDrawable="@drawable/visible"  
app:invisibleDrawable="@drawable/invisible"  
app:BtnWidth="@dimen/btn_edittext_width"  
app:BtnSpacing="@dimen/btn_edittext_padding"  
app:borderStyle="halfRect"  
app:styleColor="#ff0000"  
</code></pre>
<p>其中，边框样式的对应规则如下。</p>
<pre><code>
1、矩形样式：         app:borderStyle="rectangle"

2、半矩形样式：       app:borderStyle="halfRect"

3、圆角矩形样式：     app:borderStyle="roundRect"

4、动画特效样式：     app:borderStyle="animator"

控件抖动的效果也是利用动画实现的。调用view实例的以下方法即可实现抖动。

mPEditText.startShakeAnimation()
</code></pre>
<p>也可以使用依赖的方式去项目中用，不过如果作者不维护, 那你的项目也就需要改动了</p>
<p>作者的<a href="https://github.com/AndroidWJC/PowerfulEditText">github链接</a></p>

	
	</div>
  <a type="button" href="/2020/12/18/android-zi-ding-yi-edittext-yi-jian-qing-chu-he-mi-wen-cha-kan/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/09/linux-ubuntu-shi-yong-fail2ban-wei-nginx-bao-jia-hu-hang/" >linux(ubuntu) - 使用fail2ban 为nginx保驾护航</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-09  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="Linux-ubuntu-使用fail2ban-为nginx保驾护航"><a href="#Linux-ubuntu-使用fail2ban-为nginx保驾护航" class="headerlink" title="Linux(ubuntu) - 使用fail2ban 为nginx保驾护航"></a>Linux(ubuntu) - 使用fail2ban 为nginx保驾护航</h4><h4 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h4><p>Fail2ban软件包包含在默认的Ubuntu 20.04存储库中。 要安装它，请以root或具有sudo特权的用户身份输入以下命令：</p>
<pre><code>sudo apt update
sudo apt install fail2ban</code></pre>
<p>安装完成后，Fail2ban服务将自动启动。 您可以通过检查服务状态来验证它：</p>
<pre><code>sudo systemctl status fail2ban</code></pre>
<p>输出将如下所示：</p>
<pre><code> fail2ban.service - Fail2Ban Service
     Loaded: loaded (/lib/systemd/system/fail2ban.service; enabled; vendor preset: enabled)
     Active: active (running) since Wed 2020-08-19 06:16:29 UTC; 27s ago
       Docs: man:fail2ban(1)
   Main PID: 1251 (f2b/server)
      Tasks: 5 (limit: 1079)
     Memory: 13.8M
     CGroup: /system.slice/fail2ban.service
             └─1251 /usr/bin/python3 /usr/bin/fail2ban-server -xf start</code></pre>
<h4 id="2、Fail2ban配置"><a href="#2、Fail2ban配置" class="headerlink" title="2、Fail2ban配置"></a>2、Fail2ban配置</h4><p>默认的<code>Fail2ban</code>安装带有两个配置文件， <code>/etc/fail2ban/jail.conf</code> 和 <code>/etc/fail2ban/jail.d/defaults-debian.conf</code>。 不建议修改这些文件，因为更新软件包时它们可能会被覆盖。</p>
<p>最好的做法是：</p>
<pre><code>sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local 
或者新建
sudo vim /etc/fail2ban/jail.local </code></pre>
<p>然后修改 jail.local的内容</p>
<pre><code>[nginx-req-limit]

enabled = true
filter = nginx-req-limit
action = iptables-multiport[name=ReqLimit, port="http,https", protocol=tcp]
logpath = /var/log/nginx/access.log
findtime = 60
maxretry = 600
bantime = 600</code></pre>
<p>新增文件：<code>/etc/fail2ban/filter.d/nginx-req-limit.conf</code></p>
<pre><code># Fail2Ban configuration file
#
# supports: ngx_http_limit_req_module module

[Definition]

failregex =  -.*- .*HTTP/1.* .* .*$

# Option: ignoreregex
# Notes.: regex to ignore. If this regex matches, the line is ignored.
# Values: TEXT
#
ignoreregex =</code></pre>
<h4 id="将IP地址列入白名单"><a href="#将IP地址列入白名单" class="headerlink" title="将IP地址列入白名单"></a>将IP地址列入白名单</h4><p>您可以将要排除在外的IP地址，IP范围或主机添加到 <code>ignoreip</code> 指示。 在这里，您应该添加您的本地PC IP地址和所有其他要列入白名单的计算机。</p>
<p><code>/etc/fail2ban/jail.local</code></p>
<pre><code>ignoreip = 127.0.0.1/8 ::1 123.123.123.123 192.168.1.0/24</code></pre>
<ul>
<li>每次编辑配置文件时，都需要重新启动Fail2ban服务以使更改生效：</li>
</ul>
<pre><code>sudo systemctl restart fail2ban</code></pre>
<h4 id="Fail2ban客户端-命令"><a href="#Fail2ban客户端-命令" class="headerlink" title="Fail2ban客户端 命令"></a>Fail2ban客户端 命令</h4><ul>
<li>检查监狱状态：</li>
</ul>
<p><code>sudo fail2ban-client status sshd</code></p>
<ul>
<li>解禁IP：</li>
</ul>
<p><code>sudo fail2ban-client set sshd unbanip 23.34.45.56</code></p>
<ul>
<li>禁止IP</li>
</ul>
<p><code>sudo fail2ban-client set sshd banip 23.34.45.56</code></p>

	
	</div>
  <a type="button" href="/2020/12/09/linux-ubuntu-shi-yong-fail2ban-wei-nginx-bao-jia-hu-hang/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/09/gei-linux-an-zhuang-nginx/" >给Linux安装nginx</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-09  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="给Linux-ubuntu-服务器安装nginx"><a href="#给Linux-ubuntu-服务器安装nginx" class="headerlink" title="给Linux(ubuntu)服务器安装nginx"></a>给Linux(ubuntu)服务器安装nginx</h4><h5 id="1：检查80端口是否被占用。"><a href="#1：检查80端口是否被占用。" class="headerlink" title="1：检查80端口是否被占用。"></a>1：检查80端口是否被占用。</h5><h5 id="2：安装nginx"><a href="#2：安装nginx" class="headerlink" title="2：安装nginx"></a>2：安装nginx</h5><p>给nginx配置安装目录,就是nginx存放的目录</p>
<p>我一般安装软件都是安装在/usr/local下面的</p>
<pre><code>mkdir /usr/local/nginx</code></pre>
<p>进入nginx目录<code>cd /usr/local/nginx</code></p>
<p>使用wget命令下载nginx资源包</p>
<pre><code>wget http://nginx.org/download/nginx-1.12.2.tar.gz</code></pre>
<p>解压</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">tar <span class="token punctuation">-</span>zxvf nginx<span class="token punctuation">-</span>1.5.9.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>执行<code> ./configure命令</code></p>
<pre><code>cd nginx-1.5.9
sudo ./configure</code></pre>
<p>执行<code>./configure</code>可能会存在一下错误,如果出现请执行一下命令</p>
<blockquote>
<p>错误1</p>
<p>/configure: error: the HTTP rewrite module requires the PCRE library.</p>
</blockquote>
<p>解决方法</p>
<p>安装pcre-devel解决问题</p>
<pre><code>sudo apt-get update
sudo apt-get install libpcre3 libpcre3-dev</code></pre>
<blockquote>
<p>错误2</p>
<p>./configure: error: the HTTP cache module requires md5 functions<br>from OpenSSL library. You can either disable the module by using<br>–without-http-cache option, or install the OpenSSL library into the system,<br>or build the OpenSSL library statically from the source with nginx by using<br>–with-http_ssl_module –with-openssl=<path> options.</path></p>
</blockquote>
<p>解决办法：</p>
<pre><code>sudo apt-get install openssl libssl-dev</code></pre>
<blockquote>
<p>错误3 （如果出现这种检查不通过，则说明缺少某些依赖。）</p>
<p>ubuntu@VM-0-16-ubuntu:/usr/local/nginx/nginx-1.12.2$ sudo ./configure<br>checking for OS</p>
<p>Linux 4.15.0-118-generic x86_64<br>checking for C compiler … not found</p>
<p>./configure: error: C compiler cc is not found</p>
</blockquote>
<p>解决办法：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml">sudo apt<span class="token punctuation">-</span>get install build<span class="token punctuation">-</span>essential<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>错误4</p>
<p>error: the HTTP gzip module requires the zlib library.</p>
</blockquote>
<p>解决办法：</p>
<pre><code>apt-get install zlib1g-dev</code></pre>
<p>然后在执行<code> ./configure命令</code></p>
<pre><code>cd nginx-1.5.9
sudo ./configure</code></pre>
<h5 id="3-编译"><a href="#3-编译" class="headerlink" title="3.编译"></a>3.编译</h5><p><code>make</code> 编译 （make的过程是把各种语言写的源码文件，变成可执行文件和各种库文件）</p>
<pre><code>cd /usr/local/nginx/nginx-1.5.9
sudo make</code></pre>
<h5 id="4-make-install安装"><a href="#4-make-install安装" class="headerlink" title="4.make install安装"></a>4.make install安装</h5><p><code>make install</code> 安装 （<code>make install</code>是把这些编译出来的可执行文件和库文件复制到合适的地方）</p>
<pre><code>sudo make install</code></pre>
<h5 id="5-启动nginx服务"><a href="#5-启动nginx服务" class="headerlink" title="5.启动nginx服务"></a>5.启动nginx服务</h5><pre><code>cd /usr/local/nginx/sbin
sudo ./nginx</code></pre>
<h5 id="6-看nginx服务是否启动"><a href="#6-看nginx服务是否启动" class="headerlink" title="6.看nginx服务是否启动"></a>6.看nginx服务是否启动</h5><pre><code>ubuntu@VM-0-16-ubuntu:/usr/local/nginx/sbin$ ps -ef | grep nginx
root      7183     1  0 14:53 ?        00:00:00 nginx: master process ./nginx
nobody    7184  7183  0 14:53 ?        00:00:00 nginx: worker process
ubuntu    7252 23084  0 14:53 pts/1    00:00:00 grep --color=auto nginx</code></pre>
<p>我们看到服务已经起来了,输入ip即可访问我们nginx目录下面的html文件夹下面的index.html文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201209145642.png"></p>
<p>===================华丽的分割线======================</p>
<p><code>nginx -s reload </code>：修改配置后重新加载生效</p>
<p><code>nginx -s reopen</code> ：重新打开日志文件</p>
<p>关闭nginx：</p>
<p><code>nginx -s stop</code> :快速停止nginx</p>
<p><code>quit </code>：完整有序的停止nginx</p>

	
	</div>
  <a type="button" href="/2020/12/09/gei-linux-an-zhuang-nginx/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/09/gei-fu-wu-qi-she-zhi-ssh-mian-mi-ma-deng-lu/" >给服务器设置ssh免密码登录</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-09  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="给服务器设置ssh免密码登录"><a href="#给服务器设置ssh免密码登录" class="headerlink" title="给服务器设置ssh免密码登录"></a>给服务器设置ssh免密码登录</h4><h4 id="SSH是什么？"><a href="#SSH是什么？" class="headerlink" title="SSH是什么？"></a>SSH是什么？</h4><blockquote>
<p>SSH 为 Secure Shell 的缩写，由IETF的网络工作小组（Network Working Group）所制定；SSH为建立在应用层和传输层基础上的安全协议。<br>SSH是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用SSH协议可以有效防止远程管理过程中的信息泄露问题。<br>SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。<br>几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。</p>
</blockquote>
<ul>
<li>简单来理解，就是我拥有一台服务器，我现在想要登录上去做一些事情，那就得使用ssh登录到远程的服务器上，才能在上面进行操作。</li>
</ul>
<h4 id="SSH-服务端以及客户端配置"><a href="#SSH-服务端以及客户端配置" class="headerlink" title="SSH 服务端以及客户端配置"></a>SSH 服务端以及客户端配置</h4><h5 id="启动-sshd-服务"><a href="#启动-sshd-服务" class="headerlink" title="启动 sshd 服务"></a>启动 sshd 服务</h5><blockquote>
<p>一开始在远程服务器上面，需要查看一下他的sshd服务启动了没有，如果没有启动，任何客户端主机是连接不上来的，一般如果是自己在云厂商处购买了主机，主机启动的时候就会把sshd服务启动起来。但有可能自己在测试环境搭建机器的时候，是没有默认启动的，这时候就需要在测试机器的终端看一下，命令如下</p>
</blockquote>
<pre><code>ubuntu@VM-0-16-ubuntu:~$ ps -ef | grep sshd
root      1221     1  0 Dec07 ?        00:00:00 /usr/sbin/sshd -D
root     15649  1221  0 09:21 ?        00:00:00 sshd: ubuntu [priv]
ubuntu   15740 15649  0 09:21 ?        00:00:00 sshd: ubuntu@pts/0
ubuntu   24863 15741  0 10:24 pts/0    00:00:00 grep --color=auto sshd</code></pre>
<blockquote>
<p>这里看到第一行,sshd已经启动起来了,进程号是 1221</p>
</blockquote>
<ul>
<li>如果没有启动的话,那就启动一下,命令如下</li>
</ul>
<pre><code>ubuntu@VM-0-16-ubuntu:~$ service sshd start</code></pre>
<h4 id="登录服务器主机的方式"><a href="#登录服务器主机的方式" class="headerlink" title="登录服务器主机的方式"></a>登录服务器主机的方式</h4><h4 id="1、客户端使用密码的方式登录目标主机"><a href="#1、客户端使用密码的方式登录目标主机" class="headerlink" title="1、客户端使用密码的方式登录目标主机"></a>1、客户端使用密码的方式登录目标主机</h4><pre><code>➜  ~ ssh root@192.168.0.187
root@192.168.0.187's password:</code></pre>
<p>输入密码即可</p>
<h4 id="2、客户端使用密钥方式登录目标主机-免密码"><a href="#2、客户端使用密钥方式登录目标主机-免密码" class="headerlink" title="2、客户端使用密钥方式登录目标主机(免密码)"></a>2、客户端使用密钥方式登录目标主机(免密码)</h4><blockquote>
<p>使用场景：</p>
<p>1、如果某个运维人员临时需要登录一台机器，但是机器的管理员并不想把密码暴露给他，所以会让这个运维人员发一个自己的公钥给自己，帮他添加进去，这个运维人员就可以顺利的登录机器了。在运维做完了自己的事情之后，机器的管理员会把他从公钥列表中删掉，这样一来整个过程，密码没有暴露，运维也在这段时间内登上了机器，很完美。</p>
<p>2、因为自己懒，不想敲密码,想直接使用自己在电脑上配置的ssh_xxx来登录</p>
</blockquote>
<h4 id="使用ssh-keygen生成密匙对"><a href="#使用ssh-keygen生成密匙对" class="headerlink" title="使用ssh-keygen生成密匙对"></a>使用ssh-keygen生成密匙对</h4><pre><code>➜  ~ cd .ssh 
➜  .ssh 
➜  .ssh ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/zhaochao/.ssh/id_rsa): id_rsa
Enter passphrase (empty for no passphrase):</code></pre>
<p>回车以后，询问是否要输入一个密码来保护这个密匙，为了方便起见，我就不输入了，不然每次使用这个密匙文件还要输一遍密码,直接一路回车就ok</p>
<p>到了这里，可以看到我们已经创建好了密匙对</p>
<pre><code>➜  .ssh ls
id_rsa      id_rsa.pub  known_hosts</code></pre>
<p>我们可以使用<code>cat</code>命令来获取这个id_rsa.pub</p>
<pre><code>➜  .ssh cat id_rsa.pub 
ssh-rsa AAAAB3NDzaC1yc2EAFADAADAQFcPFT++P8rOkltuIGDSle45yEyDXtDGcCVcHmHAa8TH3/1G+cGusuvREewaJWdxS95fopdi7iumedN+bOJsCIyDsskuLJtt9FaT1MlEg8C3DH+VTkVTKadOYtFF0cwSediRadqjhMQqTOq6gH1g6zTkr4eGEIPp5RaPFDLZmeGiOeYvIS+d8eIdpHckO90KWL0T0bOcjifHlle+5ia0tSo4ZP5ekp0CxTlu0McorQIU7C1cjW/Iz5xQHpYFOdkKYImQob0H0bletwGY8K4A48ioEG9bfiBwbhmCrt93SGcp40G4e6KsuqLMe+5JUqqRcOg7TqvmD/FnftFbjDz2VTGJ/WlEJ4P3HXvAR8CdKPc/DJMmTV3oxwlmdgtDLFpqW7BkydkF2wSkO1+QP4p5ua3Ned7VLlNb16JKafBXD59q1yhwtsvhDxcgmk0tL5O3H4KPCHMZ6tePcWF2wPf+K/zLqV5DF2KXjat+PMveQf6NWAP+KK2jlG8AyV2+BBTI4nC5TdRZMXGmnVOvoc/eGbBB0NohoxZbFnjIVmpLUJcXrUXmXPojjauXQ0z37Ve/uOarVCkDTMimL+GZ4HrOx2s7FR1XM0cpw== 123456@qq.com</code></pre>
<h4 id="将公钥文件放进authorized-keys中"><a href="#将公钥文件放进authorized-keys中" class="headerlink" title="将公钥文件放进authorized_keys中"></a>将公钥文件放进authorized_keys中</h4><p>目标主机上如果没有.ssh文件夹，就自己创建一个，创建好之后,再创建一个authorized_keys文件。如果有的话就不用了。</p>
<pre><code>root@wzt-dev2-PC:~/.ssh# ll
total 8
drwxr-xr-x  2 root root 4096 7月  17 19:49 ./
drwx------ 10 root root 4096 7月  17 19:49 ../
-rw-r--r--  1 root root    0 7月  17 19:49 authorized_keys</code></pre>
<pre><code>vim authorized_keys</code></pre>
<p>将刚才的id_rsa.pub的内容放进去保存一下就可以</p>
<h4 id="这里需要注意"><a href="#这里需要注意" class="headerlink" title="这里需要注意"></a>这里需要注意</h4><blockquote>
<p>authorized_keys 文件对权限有哟求，必须是600(-rw——-)或者644<br>.ssh目录 必须是700(drwx——),否则一会儿登录不成功<br>弄完之后检查一下权限，如果不是的话，改成响应的权限就ok了</p>
</blockquote>
<h4 id="准备就绪，在客户端上登录目标主机"><a href="#准备就绪，在客户端上登录目标主机" class="headerlink" title="准备就绪，在客户端上登录目标主机"></a>准备就绪，在客户端上登录目标主机</h4><p>在登录之前，要确认一下目标主机是否允许密匙对登录，一般都是打开的，如果没有打开就自己打开</p>
<blockquote>
<p>(查看 /etc/ssh/sshd_config 文件内容 中的 PubkeyAuthentication 这一项是否为 yes,如果不是就自己修改成yes之后重启sshd服务 )</p>
</blockquote>
<pre><code>wzy@wzt-dev2-PC:~$ cat /etc/ssh/sshd_config
# Package generated configuration file
# See the sshd_config(5) manpage for details

# What ports, IPs and protocols we listen for
Port 22
# Use these options to restrict which interfaces/protocols sshd will bind to
#ListenAddress ::
#ListenAddress 0.0.0.0
Protocol 2
# HostKeys for protocol version 2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_dsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
#Privilege Separation is turned on for security
UsePrivilegeSeparation yes

# Lifetime and size of ephemeral version 1 server key
KeyRegenerationInterval 3600
ServerKeyBits 1024

# Logging
SyslogFacility AUTH
LogLevel INFO

# Authentication:
LoginGraceTime 120
PermitRootLogin yes
StrictModes yes

RSAAuthentication yes
PubkeyAuthentication yes   &lt;---------------  在这里
#AuthorizedKeysFile %h/.ssh/authorized_keys
</code></pre>
<p>到此我们就配置完了。 (不用输入密码就可以登录了)</p>
<pre><code>➜  ~ ./ssh_my_tencent 
Welcome to Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-118-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed Dec  9 10:45:26 CST 2020

  System load:  0.0               Processes:           89
  Usage of /:   5.0% of 49.15GB   Users logged in:     0
  Memory usage: 12%               IP address for eth0: 172.21.0.16
  Swap usage:   0%

 * Introducing self-healing high availability clusters in MicroK8s.
   Simple, hardened, Kubernetes for production, from RaspberryPi to DC.

     https://microk8s.io/high-availability

 * Canonical Livepatch is available for installation.
   - Reduce system reboots and improve kernel security. Activate at:
     https://ubuntu.com/livepatch
New release '20.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


&lt; Hi, How are you &gt;
 -----------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
Last login: Wed Dec  9 09:21:16 2020 from 124.126.1.181</code></pre>

	
	</div>
  <a type="button" href="/2020/12/09/gei-fu-wu-qi-she-zhi-ssh-mian-mi-ma-deng-lu/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/08/gei-linux-fu-wu-qi-she-zhi-deng-lu-ti-shi/" >给Linux服务器设置登录提示</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-08  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h5 id="1、给Linux设置登录提示"><a href="#1、给Linux设置登录提示" class="headerlink" title="1、给Linux设置登录提示"></a>1、给Linux设置登录提示</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201208180823.png"></p>
<pre><code>sudo vim /etc/motd</code></pre>
<p>然后把你想要的内用拷贝进去 退出服务器,重新登录就可以看到了</p>
<pre><code>&lt; Hi, How are you &gt;
 -----------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||  
</code></pre>
<h5 id="2、给Linux设置彩色界面"><a href="#2、给Linux设置彩色界面" class="headerlink" title="2、给Linux设置彩色界面"></a>2、给Linux设置彩色界面</h5><h5 id="查看当前终端支持集中颜色"><a href="#查看当前终端支持集中颜色" class="headerlink" title="查看当前终端支持集中颜色"></a>查看当前终端支持集中颜色</h5><p>使用<code>tput colors</code>命令即可查看当前终端支持几种颜色</p>
<h5 id="查看当前终端类型"><a href="#查看当前终端类型" class="headerlink" title="查看当前终端类型"></a>查看当前终端类型</h5><p><code>$TERM</code>变量代表当前终端类型，可使用<code>echo $TERM</code>命令查看。</p>
<h5 id="输出当前支持的颜色"><a href="#输出当前支持的颜色" class="headerlink" title="输出当前支持的颜色"></a>输出当前支持的颜色</h5><p>运行以下命令，若输出了完整的256种颜色，就说明当前终端支持256色：</p>
<pre><code>(x=`tput op` y=`printf %76s`;for i in {0..256};do o=00$i;echo -e ${o:${#o}-3:3} `tput setaf $i;tput setab $i`${y// /=}$x;done)</code></pre>
<p>若只有前8种颜色，说明当前配置是8色模式，默认情况下，Ubuntu中的Gnome-Terminal就只开启了8色支持。此时可通过修改<code>~/.bashrc</code>文件将其改为256色，在<code>.bashrc</code>文件最后中加入以下代码即可：</p>
<pre><code>export TERM=vte-256color</code></pre>
<p>如果没有<code>.bashrc</code>文件 可以选择<code>sudo vim .bashrc</code> 创建一个 也可以使用<code>sudo cp /etc/skel/.bashrc ./</code> 命令拷贝到home目录下</p>
<p>最后输入命令source ~/.bashrc，一定要输入，不然配置文件无法生效(虽然source了但是退出登录进来后有没有了颜色)</p>
<h5 id="解决-bashrc文件每次打开终端都需要source的问题"><a href="#解决-bashrc文件每次打开终端都需要source的问题" class="headerlink" title="解决.bashrc文件每次打开终端都需要source的问题"></a>解决.bashrc文件每次打开终端都需要source的问题</h5><p><code>sudo vim ~/.bash_profile</code>在文件内部输入</p>
<pre><code># 加载.bashrc文件
if test -f .bashrc ; then
source .bashrc 
fi</code></pre>

	
	</div>
  <a type="button" href="/2020/12/08/gei-linux-fu-wu-qi-she-zhi-deng-lu-ti-shi/#more" class="btn btn-default more">阅读此文</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2020/12/08/zai-linux-fu-wu-qi-shang-an-zhuang-vim/" >在linux服务器上安装vim</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2020-12-08  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="在Linux服务器上-安装-vim-及-vundle-install-vim-and-vundle"><a href="#在Linux服务器上-安装-vim-及-vundle-install-vim-and-vundle" class="headerlink" title="在Linux服务器上 安装 vim 及 vundle ( install vim and vundle)"></a>在Linux服务器上 安装 vim 及 vundle ( install vim and vundle)</h4><h5 id="1、-直接下载-这个文件-并且解压-成为-home目录下的-vim-即可"><a href="#1、-直接下载-这个文件-并且解压-成为-home目录下的-vim-即可" class="headerlink" title="1、 直接下载 这个文件 ,  并且解压,成为 home目录下的 .vim 即可."></a>1、 直接下载 <a target="_blank" rel="noopener" href="http://siwei.me/system/resources/W1siZiIsIjIwMTQvMTAvMjEvMDlfNTdfMDdfODA3X2RvdF92aW1fZm9sZGVyLnppcCJdXQ/dot_vim_folder.zip">这个文件</a> ,  并且解压,成为 home目录下的 .vim 即可.</h5><h5 id="2、-下载-vimrc-保存到-home目录下。"><a href="#2、-下载-vimrc-保存到-home目录下。" class="headerlink" title="2、 下载  vimrc, 保存到 home目录下。"></a>2、 下载  <a target="_blank" rel="noopener" href="http://siwei.me/system/resources/BAhbBlsHOgZmSSIjMjAxNC8wMS8xOS8wNV81MV8zOF82NjVfLnZpbXJjBjoGRVQ/.vimrc">vimrc</a>, 保存到 home目录下。</h5><p>接下来使用scp 命令将下载的两个文件传到Linux服务器上</p>
<pre><code>scp ~/Downloads/dot_vim_folder.zip ubuntu@85.136.62.11:~
scp ~/Downloads/vimrc ubuntu@85.136.62.11:~</code></pre>
<p>传上去后进入到Linux服务器 这个 ~ 目录 </p>
<pre><code>cd ~
unzip dot_vim_folder.zip</code></pre>
<p>然后将vimrc文件重命令一下 改为.vimrc 就好了</p>
<pre><code>mv vimrc .vimrc</code></pre>
<h4 id="conf文件代码不高亮-这里做一下配置-按照下面的命令进行配置就行"><a href="#conf文件代码不高亮-这里做一下配置-按照下面的命令进行配置就行" class="headerlink" title=".conf文件代码不高亮  这里做一下配置 按照下面的命令进行配置就行"></a>.conf文件代码不高亮  这里做一下配置 按照下面的命令进行配置就行</h4><pre><code>#!/bin/bash
#
# Highligh Nginx config file in Vim

# Download syntax highlight
mkdir -p ~/.vim/syntax/
wget http://www.vim.org/scripts/download_script.php?src_id=19394 -O ~/.vim/syntax/nginx.vim

# Set location of Nginx config file
cat &gt; ~/.vim/filetype.vim &lt;&lt;EOF
au BufRead,BufNewFile /etc/nginx/*,/etc/nginx/conf.d/*,/usr/local/nginx/conf/* if &amp;ft == '' | setfiletype nginx | endif
EOF</code></pre>

	
	</div>
  <a type="button" href="/2020/12/08/zai-linux-fu-wu-qi-shang-an-zhuang-vim/#more" class="btn btn-default more">阅读此文</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">

   
    
     <a href="/" type="button" class="btn btn-default"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a>
      

        <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
 
       <a href="/page/3/" type="button" class="btn btn-default ">下一页<i class="fa fa-arrow-circle-o-right"></i></a>     
        

  
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>分类</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Android/">Android<span>11</span></a></li>
		
			<li><a href="/categories/Appium/">Appium<span>1</span></a></li>
		
			<li><a href="/categories/ETH智能合约/">ETH智能合约<span>1</span></a></li>
		
			<li><a href="/categories/Fail2ban/">Fail2ban<span>1</span></a></li>
		
			<li><a href="/categories/IDEA/">IDEA<span>1</span></a></li>
		
			<li><a href="/categories/Java/">Java<span>1</span></a></li>
		
			<li><a href="/categories/Linux/">Linux<span>6</span></a></li>
		
			<li><a href="/categories/Mac/">Mac<span>3</span></a></li>
		
			<li><a href="/categories/NFT/">NFT<span>1</span></a></li>
		
			<li><a href="/categories/Redis/">Redis<span>1</span></a></li>
		
			<li><a href="/categories/Rust/">Rust<span>3</span></a></li>
		
			<li><a href="/categories/Ubuntu/">Ubuntu<span>1</span></a></li>
		
			<li><a href="/categories/github/">github<span>1</span></a></li>
		
			<li><a href="/categories/mysql/">mysql<span>1</span></a></li>
		
			<li><a href="/categories/nginx/">nginx<span>1</span></a></li>
		
			<li><a href="/categories/oh-my-zsh/">oh my zsh<span>1</span></a></li>
		
			<li><a href="/categories/rails/">rails<span>2</span></a></li>
		
			<li><a href="/categories/redis/">redis<span>1</span></a></li>
		
			<li><a href="/categories/web前端/">web前端<span>1</span></a></li>
		
			<li><a href="/categories/图床/">图床<span>1</span></a></li>
		
			<li><a href="/categories/钓鱼网站/">钓鱼网站<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/SSH/">SSH<span>1</span></a></li>
		
			<li><a href="/tags/总结/">总结<span>1</span></a></li>
		
			<li><a href="/tags/安卓开发/">安卓开发<span>1</span></a></li>
		
			<li><a href="/tags/Rust-编程/">Rust 编程<span>1</span></a></li>
		
			<li><a href="/tags/RecycleView/">RecycleView<span>2</span></a></li>
		
			<li><a href="/tags/linux/">linux<span>3</span></a></li>
		
			<li><a href="/tags/fragment/">fragment<span>1</span></a></li>
		
			<li><a href="/tags/一键清除/">一键清除<span>1</span></a></li>
		
			<li><a href="/tags/viewPager2/">viewPager2<span>1</span></a></li>
		
			<li><a href="/tags/密文/">密文<span>1</span></a></li>
		
			<li><a href="/tags/Vim/">Vim<span>1</span></a></li>
		
			<li><a href="/tags/背景图/">背景图<span>1</span></a></li>
		
			<li><a href="/tags/运维/">运维<span>1</span></a></li>
		
			<li><a href="/tags/hexo/">hexo<span>1</span></a></li>
		
			<li><a href="/tags/Redis/">Redis<span>1</span></a></li>
		
			<li><a href="/tags/Java/">Java<span>2</span></a></li>
		
			<li><a href="/tags/服务器搭建/">服务器搭建<span>1</span></a></li>
		
			<li><a href="/tags/rails/">rails<span>1</span></a></li>
		
			<li><a href="/tags/NFT/">NFT<span>1</span></a></li>
		
			<li><a href="/tags/常用命令/">常用命令<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>58</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2021/10/12/appium-zi-dong-hua-ce-shi/" ><i class="fa fa-file-o"></i>appium自动化测试</a>
      </li>
    
      <li>
        <a href="/2021/07/30/deploy-a-nft-art-and-transfer-in-eth-testnet/" ><i class="fa fa-file-o"></i>deploy a nft art and transf...</a>
      </li>
    
      <li>
        <a href="/2021/07/01/ji-yi-ci-bei-diao-yu-wang-zhan-dao-zou-eth-de-jing-li/" ><i class="fa fa-file-o"></i>记一次被钓鱼网站盗走eth的经历</a>
      </li>
    
      <li>
        <a href="/2021/06/25/android-tablayout-viewpager2-fragment-ni-ke-neng-yong-cuo-liao/" ><i class="fa fa-file-o"></i>Android tablayout viewpager...</a>
      </li>
    
      <li>
        <a href="/2021/06/22/android-zhong-de-dan-li-mo-shi/" ><i class="fa fa-file-o"></i>Android 中的单例模式</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="false"></i><a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" title="" target="_blank"]);">hexo-theme-bithack</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2024 Weaver Li's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
   </html>
